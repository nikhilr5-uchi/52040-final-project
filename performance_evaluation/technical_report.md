I started out first creating the FaaS service. I did this in main.py. The first thing I did was get connected to the local redis db on port 6379. I then created the app. After doing that I first worked on creating the reigster_function handler. It accepts a request and processing the json in that request to create a key, value pair of the task_id (which is generated by the server) and then the function which is the body. It then handles execution by accepting a request and loading that task_id in the redis db and also creating a pub message. Once it finds it it adds the payload to the object and sets the status the QUEUED before adding it back to the db.  

The next big step was creating the task dispatcher. The task dispatcher takes in 3 arguments (mode, port, num_workers) from the cmd line. It also connects to the redis db via port 6379 and then runs. The run function checks whether the mode was pull or push, if so, then creates the correct sockets. It then waits from a request via pubsub from the server and subscribes. Once it recieves message via redis db then it handles it depends on mode. Local runs it on a thread pool local where as pull and push both send message through different sockets.

In pull the message is recieved then executed via a worker pool. After it is returns back via the socket and the status is set to complete and the return value is stored in db.

In push we accept the number of workers and use that to create our worker pool. Each worker is given a unique id. When a request comes in the task dispatcher randomly choices one of the workers and sends the request to that worker. The worker runs the function and returns the result where the task dispatcher pushes the payload to redis.